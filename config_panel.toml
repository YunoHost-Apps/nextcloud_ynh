version = "1.0"

[main]
name = "Nextcloud configuration"
services = ["php8.2-fpm"]

    [main.mode]
    name = "Modes"

        [main.mode.maintenance]
        ask = "Enable maintenance mode"
        type = "boolean"
        bind = ":__INSTALL_DIR__/config/config.php"
        
        [main.mode.has_internet_connection]
        ask = "Internet connection available"
        type = "boolean"
        bind = ":__INSTALL_DIR__/config/config.php"
        help = "Is Nextcloud connected to the Internet or running in a closed network?"

    [main.localization]
    name = "Localization"

        [main.localization.default_phone_region]
        ask = "Default phone region"
        type = "select"
        bind = ":__INSTALL_DIR__/config/config.php"
        help = "It is required to allow inserting phone numbers in the user profiles starting without the country code (e.g. +49 for Germany)."

        [main.localization.default_timezone]
        ask = "Default timezone"
        type = "select"
        bind = ":__INSTALL_DIR__/config/config.php"
        help = "The default timezone parameter is only used when the timezone of the user canâ€™t be determined."

    [main.account]
    name = "Account"

        [main.account.lost_password_link]
        ask = "Lost password link"
        type = "url"
        bind = ":__INSTALL_DIR__/config/config.php"
        help = "Allow to redirect on a custom form to require a password reset (for example to ask you to reset it from this YunoHost webadmin)"
        
        [main.account.logout_url]
        ask = "Logout URL"
        type = "url"
        bind = ":__INSTALL_DIR__/config/config.php"
        help = "Redirect on this URL when a user click on 'Logout' action"

    [main.files]
    name = "Files"
        
        [main.files.skeleton]
        ask = "To configure the default files created for new users, you can do it by logging on Nextcloud with an admins account and edit files under `New user default files/default` or if you want to target a specific language `New user default files/FR`."
        type = "alert"
        style = "info"
        
        [main.files.trashbin_retention_obligation]
        ask = "Trashbin retention"
        type = "string"
        bind = ":__INSTALL_DIR__/config/config.php"
        help = "If the trash bin app is enabled (default), this setting defines the policy for when files and folders in the trash bin will be permanently deleted."

        [main.files.version_retention_obligation]
        ask = "Version retention"
        type = "string"
        bind = ":__INSTALL_DIR__/config/config.php"
        help = "If the versions app is enabled (default), this setting defines the policy for when versions will be permanently deleted."

        [main.files.enable_previews]
        ask = "Enable previews"
        type = "boolean"
        bind = ":__INSTALL_DIR__/config/config.php"
        help = "Info: Previews of photos and text documents could consume a lot of resources."

    [main.apps]
    name = "Apps"
        
        [main.apps.auto_upgrade_apps]
        ask = "Upgrade apps"
        type = "select"
        choices.manual = "Manually"
        choices.daily = "Daily at 00:10"
        choices.weekly = "Weekly at 00:10 on Sunday"
        choices.monthly = "Monthly at 00:10 on the 1st"
        help = "Keep in mind that upgrade apps could break things in your instance, so you need to strike the right balance between reliability and safety."
        
        [main.apps.defaultapp]
        ask = "Default app to display"
        type = "tags"
        bind = ":__INSTALL_DIR__/config/config.php"
        help = "Set the default app to open on login."


    [main.php_fpm_config]
    name = "PHP-FPM configuration"

        [main.php_fpm_config.fpm_footprint]
        ask = "Memory footprint"
        type = "select"
        choices.low = "Low, <= 20Mb per pool"
        choices.medium = "Medium, between 20Mb and 40Mb per pool"
        choices.high = "High, > 40Mb per pool"
        choices.specific = "Use specific value"
        default = "low"

        [main.php_fpm_config.fpm_free_footprint]
        visible = "fpm_footprint == 'specific'"
        ask = "Memory footprint of the service?"
        type = "number"
        default = "0"
        help = "Free field to specify exactly the footprint in Mb if you don't want to use one of the three previous values."

        [main.php_fpm_config.fpm_usage]
        ask = "Expected usage"
        type = "select"
        choices = ["low", "medium", "high"]
        default = "low"
        help = "low: Personal usage, behind the SSO. No RAM footprint when not used, but the impact on the processor can be high if many users are using the service.<br>medium: Low usage, few people or/and publicly accessible. Low RAM footprint, medium processor footprint when used.<br>high: High usage, frequently visited website. High RAM footprint, but lower on processor usage and quickly responding."
